(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{785:function(a,s,e){"use strict";e.r(s);var t=e(45),v=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"system-programming"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#system-programming"}},[a._v("#")]),a._v(" System Programming")]),a._v(" "),e("h1",{attrs:{id:"_1-linux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-linux"}},[a._v("#")]),a._v(" 1. LINUX")]),a._v(" "),e("h3",{attrs:{id:"특징"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#특징"}},[a._v("#")]),a._v(" 특징")]),a._v(" "),e("ul",[e("li",[a._v("서버/클라우드에 많이 사용되는 운영체제")]),a._v(" "),e("li",[a._v("kernel + shell + system처럼 기본 프로그램만 설치되어있는 리눅스를 사용하면 c언어를 컴파일 하는것도 굉장히 빨라진다. 윈도우에서 네시간 걸리면 compile이 리눅스에서는 10분이면 될 수도 있다.")]),a._v(" "),e("li",[a._v("UNIX 계열이다.")]),a._v(" "),e("li",[a._v("프로그래머 스타일이다.")]),a._v(" "),e("li",[a._v("plain하게 프로그래밍이 가능하다.\n"),e("ul",[e("li",[a._v("C언어도 몇가지가 있다.")]),a._v(" "),e("li",[a._v("ANSI C가 표준인데 리눅스에서 쓸 수 있다.")])])])]),a._v(" "),e("h3",{attrs:{id:"history"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#history"}},[a._v("#")]),a._v(" History")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("Linus Torvalds")]),a._v(" "),e("ul",[e("li",[a._v("가 유닉스를 기반으로 개발")]),a._v(" "),e("li",[a._v("다중 사용자, 다중 작업(시분할 시스템, 멀티 태스킹)을 지원하는 유닉스와 유사")])])]),a._v(" "),e("li",[e("p",[a._v("GNU 프로젝트 : GNU is not Unix")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("유닉스는 여러 회사에서 각자 개발, 소스를 공유하지 않았다.")])]),a._v(" "),e("li",[e("p",[a._v("리차드 스톨만 : 상호협력 문화로 돌아갈 것을 주장하며 GNU 선언문을 발표")])]),a._v(" "),e("li",[e("p",[a._v("유닉스를 대체할 수 있는 공개돼있는 운영체제를 만들자! 그리고 이를 위해 Free Software Foundation 설립과 GNU Public License 규약을 만든다.")])]),a._v(" "),e("li",[e("p",[a._v("GPL : 기술은 공유하고 마음대로 수정 업데이트 가능하다. 그러나 새로 만든 기술은 마찬가지로 GPL을 따라야 한다.")])]),a._v(" "),e("li",[e("p",[a._v("운영체제 커널 개발 시도 : GNU Hurd.")]),a._v(" "),e("p",[a._v("![image-20210509025719523](./System Programming.assets/image-20210509025719523.png)")])]),a._v(" "),e("li",[e("p",[a._v("운영체제를 만들기 위해선 만들어야 할 레이어들이 굉장히 많다.")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("vi")]),a._v(" : 유닉스 계열의 에디터. improved 버전은"),e("code",[a._v("vim")]),a._v("이라고 불린다.")])]),a._v(" "),e("li",[e("p",[a._v("라이브러리, 컴파일러, 에디터, 쉘 이런것들을 다 만들어 줘야 유닉스를 대체할 수 있다.")])])])]),a._v(" "),e("li",[e("p",[a._v("GNU Project X Linux")]),a._v(" "),e("ul",[e("li",[a._v("핵심인 커널 개발이 계속 지연된다.")]),a._v(" "),e("li",[a._v("이때 리누스 토발즈가 리눅스 커널 소스를 오픈한다.")]),a._v(" "),e("li",[a._v("리차트 스톨만의 GNU 프로젝트 산출물과 리눅스OS를 합치게 된다.")]),a._v(" "),e("li",[a._v("GNU도 열심히 만들었는데 억울하게 다들 리눅스라고만 불러서 스톨만이 슬퍼한다.")])])])]),a._v(" "),e("h2",{attrs:{id:"linux-files"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux-files"}},[a._v("#")]),a._v(" Linux Files")]),a._v(" "),e("ul",[e("li",[a._v("모든것은 파일이라는 철학이 있다.\n"),e("ul",[e("li",[a._v("모든 인터렉션은 파일 I/O처럼 다루어진다. 외부디바이스도!")])])]),a._v(" "),e("li",[a._v("File Namespace\n"),e("ul",[e("li",[a._v("윈도우 : A드라이브, C드라이브")]),a._v(" "),e("li",[a._v("리눅스 : 전역 네임스페이스\n"),e("ul",[e("li",[a._v("/media/floppy/")])])])])]),a._v(" "),e("li",[a._v("파일은 inode 고유값과 자료구조에 의해 주요 정보 관리")])]),a._v(" "),e("h2",{attrs:{id:"linux-process"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux-process"}},[a._v("#")]),a._v(" Linux Process")]),a._v(" "),e("ul",[e("li",[a._v("리눅스 실행 파일 : ELF(Executable and Linkable format)\n"),e("ul",[e("li",[a._v("프로세스의 구조(stack, heap, text, data, bss 등을 정의한다)")])])]),a._v(" "),e("li",[a._v("다양한 시스템 리소스\n"),e("ul",[e("li",[a._v("시스템콜 호출을 통해 리소스 처리 관리 가능\n"),e("ul",[e("li",[a._v("타이머, 시그널, 파일, 네트워크, 디바이스, IPC")])])])])]),a._v(" "),e("li",[a._v("가상 메모리 지원")]),a._v(" "),e("li",[a._v("프로세는 pid(프로세스ID) 고유값을 구분. (파일은 inode)")]),a._v(" "),e("li",[a._v("init 프로세스(첫번째 프로세스)를 기반으로 fork() 시스템콜을 해서 부모자식 관계로 신규 프로세스를 만든다.")])]),a._v(" "),e("h2",{attrs:{id:"linux-권한"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux-권한"}},[a._v("#")]),a._v(" Linux 권한")]),a._v(" "),e("ul",[e("li",[a._v("시분할 시스템이여서 다중 사용자 접속이 가능하다.")]),a._v(" "),e("li",[a._v("이를 사용자/그룹으로 나누어서 권한을 나눠줄 수 있다.")]),a._v(" "),e("li",[a._v("root라는 기본 아이디가 있어서 이게 슈퍼관리자다.\n"),e("ul",[e("li",[a._v("해커들의 최대 목표는 root관리자를 획득하는 것")])])]),a._v(" "),e("li",[a._v("파일마다 사용자/그룹에 대해\n"),e("ul",[e("li",[a._v("read, write, execute의 권한을 관리한다.")]),a._v(" "),e("li",[a._v("접근 권한 정보는 inode의 자료구조에 저장된다.")])])])]),a._v(" "),e("h1",{attrs:{id:"_2-ubuntu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-ubuntu"}},[a._v("#")]),a._v(" 2. Ubuntu")]),a._v(" "),e("blockquote",[e("p",[a._v("aws에서 진행")])]),a._v(" "),e("h1",{attrs:{id:"_3-shell"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-shell"}},[a._v("#")]),a._v(" 3. Shell")]),a._v(" "),e("h2",{attrs:{id:"shell-사용법"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shell-사용법"}},[a._v("#")]),a._v(" Shell 사용법")]),a._v(" "),e("ul",[e("li",[a._v("shell : 사용자와 운영체제간 인터페이스\n"),e("ul",[e("li",[a._v("사용자의 명령 해석 - 시스템콜 호출  - 커널에 명령")]),a._v(" "),e("li",[a._v("cli 혹은 gui 가 존재")])])])]),a._v(" "),e("p",[a._v("![image-20210509164746673](./System Programming.assets/image-20210509164746673.png)")]),a._v(" "),e("ul",[e("li",[a._v("이 중 bash를 배우겠습니다.")])]),a._v(" "),e("h3",{attrs:{id:"다중-사용자-지원-명령어"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#다중-사용자-지원-명령어"}},[a._v("#")]),a._v(" 다중 사용자 지원 명령어")]),a._v(" "),e("ul",[e("li",[a._v("UNIX는 시분할 시스템을 통해 다중 사용자를 지원한다.")]),a._v(" "),e("li",[e("code",[a._v("whoami")]),a._v(" : 아이디 알기")]),a._v(" "),e("li",[e("code",[a._v("passwd")]),a._v(" : id의 패스워드를 바꾼다. aws로 만든 ec2 ubuntu에서는 pw설정이 되어있지 않아서 잘 모르겠다.")]),a._v(" "),e("li",[e("code",[a._v("useradd")]),a._v(" : 기본 설정을 자동으로 하지 않는다.")]),a._v(" "),e("li",[e("code",[a._v("adduser")]),a._v(" : 기본 설정을 자동으로 한다. 이걸 기본으로 쓴다.\n"),e("ul",[e("li",[a._v("id를 만들면 해당 아이디 디렉토리가 /home/ 밑에 만들어진다. useradd하면 이게 안 만들어지고 기타 설정들도 안 만들어진다. adduser를 해보자. root가 아니면 안된다.")])])]),a._v(" "),e("li",[e("code",[a._v("sudo")]),a._v(" : root권한으로 실행한다. root 계정으로 로그인 하지 않은 상태에서 가능하다.\n"),e("ul",[e("li",[a._v("특정 유저들만 "),e("code",[a._v("sudo")]),a._v("를 사용할 수 있게 설정한다. "),e("code",[a._v("ubuntu")]),a._v(" 유저는 사용 가능하다.")]),a._v(" "),e("li",[e("code",[a._v("/etc/sudoers")]),a._v(" 파일에서 설정 변경 가능")]),a._v(" "),e("li",[a._v("여기에 ![image-20210509174015222](./System Programming.assets/image-20210509174015222.png)")]),a._v(" "),e("li",[a._v("추가해주면 이제 keith 도 sudo 가능")]),a._v(" "),e("li",[a._v("왜 그냥 "),e("code",[a._v("root")]),a._v("를 안쓰냐? "),e("code",[a._v("sudo")]),a._v("쓰면서 주의하란 말임.")])])]),a._v(" "),e("li",[e("code",[a._v("/home/user/.bashrc")]),a._v(", "),e("code",[a._v("/home/user/.profile")]),a._v(" : 사용자의 기본 설정이 있다.")]),a._v(" "),e("li",[e("code",[a._v("su")]),a._v(" :\n"),e("ul",[e("li",[e("code",[a._v("su root")]),a._v(" : 현재 사용자 환경설정 기반(.bashrc, .profile) root로 변경")]),a._v(" "),e("li",[e("code",[a._v("su - root")]),a._v(" : 변경 사용자 환경설정 기반 root로 변경")])])]),a._v(" "),e("li",[e("code",[a._v("shift v")]),a._v(" : 한줄 선택\n"),e("ul",[e("li",[e("code",[a._v("y")]),a._v(" 복사")]),a._v(" "),e("li",[e("code",[a._v("p")]),a._v(" 붙여넣기")])])]),a._v(" "),e("li",[e("code",[a._v("man ls")]),a._v(" : 를 쳐서 옵션들을 볼 수 있다 (manual)")]),a._v(" "),e("li",[e("code",[a._v("cat")]),a._v(" : vi를 쓰지 않고 터미널에서 바로 내용을 본다.")]),a._v(" "),e("li",[e("code",[a._v("head")]),a._v(", "),e("code",[a._v("tail")]),a._v(" : cat과 비슷한데 첫 10줄, 끝 10줄만 본다.")]),a._v(" "),e("li",[e("code",[a._v("more")]),a._v(" : 한 화면에 꽉 차게만 띄우고 space누를때마다 페이지, 엔터누를때마다 한줄씩 넘길 수 있다.")]),a._v(" "),e("li",[e("code",[a._v("rm")]),a._v(" : remove. 조심해야된다. 그냥 삭제됨. 리눅스엔 휴지통이 없다.")]),a._v(" "),e("li",[e("code",[a._v("rm -rf 디렉토리명")]),a._v(" : recursive force 로 하위폴더 전부다 삭제")])]),a._v(" "),e("h2",{attrs:{id:"ls와-파일권한"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ls와-파일권한"}},[a._v("#")]),a._v(" ls와 파일권한")]),a._v(" "),e("p",[a._v("![image-20210509174807799](./System Programming.assets/image-20210509174807799.png)")]),a._v(" "),e("p",[a._v("![image-20210509175036976](./System Programming.assets/image-20210509175036976.png)")]),a._v(" "),e("ul",[e("li",[a._v("1칸 / 3칸 / 3칸 / 3칸")]),a._v(" "),e("li",[a._v("파일이면 "),e("code",[a._v("-")]),a._v(" 디렉토리면 "),e("code",[a._v("d")])]),a._v(" "),e("li",[a._v("소유자 / 그룹 / 공개")]),a._v(" "),e("li",[a._v("읽기 / 쓰기 / 실행")])]),a._v(" "),e("h3",{attrs:{id:"chmod-change-mod"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#chmod-change-mod"}},[a._v("#")]),a._v(" chmod (change mod)")]),a._v(" "),e("p",[a._v("![image-20210509175617337](./System Programming.assets/image-20210509175617337.png)")]),a._v(" "),e("p",[a._v("![image-20210509175728298](./System Programming.assets/image-20210509175728298.png)")]),a._v(" "),e("p",[a._v("![image-20210509175759282](./System Programming.assets/image-20210509175759282.png)")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("-R")]),a._v(" "),e("code",[a._v("directory")]),a._v(" : directory 하위의 모든 파일들에게 설정. r은 "),e("code",[a._v("recursive")])])]),a._v(" "),e("h3",{attrs:{id:"chown-change-owner"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#chown-change-owner"}},[a._v("#")]),a._v(" chown (change owner)")]),a._v(" "),e("p",[a._v("![image-20210509180510646](./System Programming.assets/image-20210509180510646.png)")]),a._v(" "),e("ul",[e("li",[a._v("그룹이 빈경우는 사용자의 default 그룹 적용")]),a._v(" "),e("li",[a._v("사용자가 빈경우 사용자의 default 그룹 적용")])]),a._v(" "),e("h2",{attrs:{id:"redirection-and-pipe"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redirection-and-pipe"}},[a._v("#")]),a._v(" Redirection and pipe")]),a._v(" "),e("h3",{attrs:{id:"standard-stream"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#standard-stream"}},[a._v("#")]),a._v(" Standard Stream")]),a._v(" "),e("ul",[e("li",[a._v("command로 실행되는 프로세스는 세가지 stream이 있다.\n"),e("ul",[e("li",[a._v("stdin : standard input stream")]),a._v(" "),e("li",[a._v("stdout : standard output stream")]),a._v(" "),e("li",[a._v("stderr : standard error stream")])])]),a._v(" "),e("li",[a._v("모든 스트림은 plain text로 console에 출력된다.")])]),a._v(" "),e("h3",{attrs:{id:"redirection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redirection"}},[a._v("#")]),a._v(" redirection")]),a._v(" "),e("ul",[e("li",[a._v("표준 스트림의 흐름을 바꿀수 있다.\n"),e("ul",[e("li",[e("code",[a._v("<")]),a._v(" ,"),e("code",[a._v(">")]),a._v(" 를 사용함")]),a._v(" "),e("li",[a._v("출력의 방향을 바꿀 수 있다.")]),a._v(" "),e("li",[a._v("명령어 표준 출력을 화면이 아니라 파일에 쓰고 싶을때!\n"),e("ul",[e("li",[e("code",[a._v("ls > files.txt")]),a._v("ls내용을 files.txt에 쓰고 싶다.  파일이 없으면 만들어 준다.")]),a._v(" "),e("li",[e("code",[a._v("ls >> files.txt")]),a._v(" 현존하는 files.txt의 뒤에 내용을 추가해준다.")])])])])])]),a._v(" "),e("h3",{attrs:{id:"pipe"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pipe"}},[a._v("#")]),a._v(" pipe")]),a._v(" "),e("blockquote",[e("p",[a._v("프로세스간 통신에 씌였던 파이프. 근데 여기선 redir과 연결해서 생각하고 ipc와 연결해서 생각하지 않아도 된다.")])]),a._v(" "),e("ul",[e("li",[e("p",[a._v("한 프로세스의 출력 스트림을 다른 프로세스의 입력 스트림으로 사용할 때")]),a._v(" "),e("p",[a._v("![image-20210510162309284](./System Programming.assets/image-20210510162309284.png)")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("ls | grep files.txt")]),a._v(" : ls 명령 출력이 grep 명령 입력스트림으로 들어감")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("grep")]),a._v(" : 입력 키워드를 찾는 명령어")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("ls | grep issue")]),a._v(" : issue라는 단어가 있는 ls결과를 찾는다.")])]),a._v(" "),e("li",[e("p",[a._v("![image-20210510163059795](./System Programming.assets/image-20210510163059795.png)")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("grep -i sometext")]),a._v(" 식으로 많이 쓰인다.")]),a._v(" "),e("p",[a._v("![image-20210510163421907](./System Programming.assets/image-20210510163421907.png)")])])])])]),a._v(" "),e("h2",{attrs:{id:"foreground-and-background-process"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#foreground-and-background-process"}},[a._v("#")]),a._v(" foreground and background process")]),a._v(" "),e("blockquote",[e("p",[a._v("폰 노이만 구조에 의해 실행 파일은 모두 메모리에 우선 올라간다. 코드 이미지 또는 바이너리를 실행파일이라고 하고 실행 중인 프로그램은 프로세스라고 한다.")])]),a._v(" "),e("ul",[e("li",[e("p",[a._v("프로세스에는 다음과 같은 상태 정보가 있다.")]),a._v(" "),e("ul",[e("li",[a._v("가상 메모리 및 물리 메모리 정보")]),a._v(" "),e("li",[a._v("시스템 리소스 관련 정보")]),a._v(" "),e("li",[a._v("스케쥴링 단위")])])]),a._v(" "),e("li",[e("p",[a._v("리눅스는 기본적으로 다양한 프로세스가 실행된다 . 유닉스의 철학이 여러 프로그램이 서로 유기적으로 각자의 일을 수행하면서 전체시스템이 동작하도록 하는 모델이기 때문.")])])]),a._v(" "),e("h3",{attrs:{id:"foreground-process"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#foreground-process"}},[a._v("#")]),a._v(" foreground process")]),a._v(" "),e("ul",[e("li",[a._v("기본적으로 터미널에서 실행하는 모든 것. 프로세스 수행 종료까지 사용자가 다른 입력을 하지 못한다.")])]),a._v(" "),e("h3",{attrs:{id:"background-process"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#background-process"}},[a._v("#")]),a._v(" background process")]),a._v(" "),e("ul",[e("li",[a._v("사용자 입력관 상관없이 실행됨.")]),a._v(" "),e("li",[a._v("실행하고 뒤에 "),e("code",[a._v("&")]),a._v("를 붙여주면 백그라운드로 실행되며 백그라운드 job 번호와 PID가 뜬다.")]),a._v(" "),e("li",[a._v("ps를 쳐서 백그라운드에 실행됨을 확인할 수 있다.")])]),a._v(" "),e("p",[a._v("![image-20210510194034435](System Programming.assets/image-20210510194034435.png)")]),a._v(" "),e("h2",{attrs:{id:"프로세스-관리-및-제어"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#프로세스-관리-및-제어"}},[a._v("#")]),a._v(" 프로세스 관리 및 제어")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("ctrl z")]),a._v(" : 프로세스를 중단한다.")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("jobs")]),a._v(" : bg프로세스들을 보여준다.")]),a._v(" "),e("ul",[e("li",[a._v("![image-20210510194626367](./System Programming.assets/image-20210510194626367.png)")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("bg")]),a._v(" : 최근에 중단되 bg프로세스를 실행한다.")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("ctrl c")]),a._v(" : 프로세스를 죽인다.")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("ps")]),a._v(" : 프로세스 상태 확인")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("kill -9 pid")]),a._v(" 하면 프로세스 죽이기 가능. -9는 force의 뜻")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("kill %jobnumber")]),a._v(" 해도된다.")]),a._v(" "),e("p",[a._v("![image-20210510195204132](./System Programming.assets/image-20210510195204132.png)")])]),a._v(" "),e("li",[e("p",[a._v("프로세스 중 "),e("code",[a._v("웹서버")]),a._v("가 있는데 이런건 24시간 돌아간다. 데몬 중 하나임.")])])]),a._v(" "),e("h2",{attrs:{id:"리눅스-파일-시스템"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#리눅스-파일-시스템"}},[a._v("#")]),a._v(" 리눅스 파일 시스템")]),a._v(" "),e("blockquote",[e("p",[a._v("모든 것은 파일이다. -unix")])]),a._v(" "),e("ul",[e("li",[a._v("마우스, 키보드, 마이크 이런것도 전부 파일과 같이 다루어짐")]),a._v(" "),e("li",[a._v("모든 자원에 대해 추상화 인터페이스로 파일 인터페이스를 활용한다.")]),a._v(" "),e("li",[e("code",[a._v("cd /dev")]),a._v(" : 에 가면 device들을 볼 수 있다.\n"),e("ul",[e("li",[e("code",[a._v("tty")]),a._v(" : 터미널. 가상 파일 시스템 인터페이스를 통해 가상 터미널(가상 디바이스)에 연결돼있다.")])])])]),a._v(" "),e("h3",{attrs:{id:"슈퍼-블록-super-block"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#슈퍼-블록-super-block"}},[a._v("#")]),a._v(" 슈퍼 블록(super block)")]),a._v(" "),e("p",[a._v("![image-20210510214157519](./System Programming.assets/image-20210510214157519.png)")]),a._v(" "),e("ul",[e("li",[a._v("슈퍼 블록 : 파일시스템에 관한 정보가 있다. 전체 사이즈, 어떤 파일시스템 알고리즘인가?")]),a._v(" "),e("li",[a._v("파일이름과 inode는 매핑되어 있다. 프로세스와 pid가 매핑되어 있듯이")]),a._v(" "),e("li",[a._v("![image-20210510214415566](./System Programming.assets/image-20210510214415566.png)")])]),a._v(" "),e("h2",{attrs:{id:"리눅스-파일-시스템-탐색"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#리눅스-파일-시스템-탐색"}},[a._v("#")]),a._v(" 리눅스 파일 시스템 탐색")]),a._v(" "),e("h3",{attrs:{id:"inode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#inode"}},[a._v("#")]),a._v(" inode")]),a._v(" "),e("ul",[e("li",[a._v("리눅스 파일 탐색 (/home/ubuntu/link.txt)\n"),e("ul",[e("li",[a._v("각 디렉토리 엔트리(dentry) 탐색\n"),e("ul",[e("li",[a._v("엔트리는 해당 디렉토리 파일/디렉토리 정보가 있다.")])])]),a._v(" "),e("li",[a._v("'/' dentry 에서 'home'을 찾고, 'home' dentry에서 'ubuntu'를 찾고, 'ubuntu' dentry 에서 link.txt 파일이름에 매핑돼있는 inode를 찾는다.")]),a._v(" "),e("li",[a._v("Each dentry maps an inode number to a file name and a parent directory.")])])])]),a._v(" "),e("p",[a._v("![image-20210511085303705](./System Programming.assets/image-20210511085303705.png)")]),a._v(" "),e("ul",[e("li",[a._v("home 아래에 내 계정")]),a._v(" "),e("li",[a._v("media, mnt : 디바이스, 추가 ssd")]),a._v(" "),e("li",[a._v("etc : 다양한 설정 파일들")]),a._v(" "),e("li",[a._v("dev : 마우스 / 키보드 / 터미널")]),a._v(" "),e("li",[a._v("bin, sbin : 쉘 명령어의 실행 파일들. 'PATH'설정 돼 ㅇㅆ음")]),a._v(" "),e("li",[a._v("boot : 부팅 관련")]),a._v(" "),e("li",[a._v("var/log : 로그파일들 생김. 서버 쓰면 자주 씀.")])]),a._v(" "),e("h2",{attrs:{id:"하드-링크"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#하드-링크"}},[a._v("#")]),a._v(" 하드 링크")]),a._v(" "),e("blockquote",[e("p",[a._v("링크는 유닉스 시스템에만 있는 독특한 기능이다.")])]),a._v(" "),e("ul",[e("li",[e("code",[a._v("cp")]),a._v("  명령어 : copy\n"),e("ul",[e("li",[e("code",[a._v("cp link.txt link3.txt")]),a._v(" : link.txt를 복사해서 link3.txt를 만든다")])])]),a._v(" "),e("li",[e("code",[a._v("rm")]),a._v(" 명령어 : remove\n"),e("ul",[e("li",[e("code",[a._v("rm link3.txt")])])])]),a._v(" "),e("li",[e("code",[a._v("ln")]),a._v(" : 하드링크\n"),e("ul",[e("li",[a._v("윈도우에 바로가기가 있다면 unix에서는 링크가 있다.")])])]),a._v(" "),e("li",[e("code",[a._v("ln link.txt hard.txt")]),a._v(" 를 하게되면 "),e("code",[a._v("hard.txt")]),a._v("가 생긴다.\n"),e("ul",[e("li",[a._v("카피와 같은가? ㄴㄴ 동일한 inode번호와 데이터를 가지고 있다.")]),a._v(" "),e("li",[a._v("![image-20210511091431375](./System Programming.assets/image-20210511091431375.png)")]),a._v(" "),e("li",[a._v("카피는 inode가 다른 번호가 생긴다.")]),a._v(" "),e("li",[a._v("원본 변경시 링크도 당연히 변경")]),a._v(" "),e("li",[a._v("원본 삭제시 "),e("strong",[a._v("링크는 그대로 있다")]),a._v(" "),e("ul",[e("li",[a._v("![image-20210511092049892](./System Programming.assets/image-20210511092049892.png)")]),a._v(" "),e("li",[a._v("링크도 원본만큼 유효한 포인터이기 때문")])])])])])]),a._v(" "),e("h2",{attrs:{id:"소프트-링크"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#소프트-링크"}},[a._v("#")]),a._v(" 소프트 링크")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("ln -s link.txt softlink.txt")]),a._v(" : -s를 붙여서 소프트링크를 해준다.")]),a._v(" "),e("li",[a._v("윈도우의 바로가기와 더 비슷하다")]),a._v(" "),e("li",[a._v("소프트링크는 inode 값이 다르다!")]),a._v(" "),e("li",[a._v("원본 삭제시 소프트링크는 같이 삭제된다.")]),a._v(" "),e("li",[a._v("별도의 inode이며 여기에 저장된 address는 원본파일의 inode이다.")]),a._v(" "),e("li",[a._v("하드링크는 원본파일과 동일한 inode")])]),a._v(" "),e("h2",{attrs:{id:"특수파일"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#특수파일"}},[a._v("#")]),a._v(" 특수파일")]),a._v(" "),e("ul",[e("li",[a._v("디바이스\n"),e("ul",[e("li",[a._v("블록 디바이스 : HDD, CD/DVD처럼 블록/섹터 단위로 데이터 송신, IO 송수신 속도 높다.")]),a._v(" "),e("li",[a._v("케릭터 디바이스 : 키보드, 마우스 같은 바이트 단위 데이터. 손수신 속도가 낮다.")])])])]),a._v(" "),e("h1",{attrs:{id:"_4-system-programming"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-system-programming"}},[a._v("#")]),a._v(" 4. System Programming")]),a._v(" "),e("h2",{attrs:{id:"시스템콜과-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#시스템콜과-api"}},[a._v("#")]),a._v(" 시스템콜과 API")]),a._v(" "),e("h3",{attrs:{id:"시스템콜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#시스템콜"}},[a._v("#")]),a._v(" 시스템콜")]),a._v(" "),e("ul",[e("li",[a._v("시스템 콜 : 사용자 영역에서 커널 영역으로 들어가는 함수\n"),e("ul",[e("li",[a._v("여러 라이브러리(api)로 이뤄져있다.")]),a._v(" "),e("li",[a._v("리눅스/유닉스는 c언어로 만들어져 있다.")]),a._v(" "),e("li",[a._v("how does it work\n"),e("ul",[e("li",[a._v("cpu가 커널 모드로 바뀜")]),a._v(" "),e("li",[a._v("instruction code(CPU가 제공)로 인터럽트(0x80)를 일으킨다.")]),a._v(" "),e("li",[a._v("IDT에서 0x80에 해당하는 함수를 실행. 0x80은 system_call() 이다.")]),a._v(" "),e("li",[a._v("![image-20210511110539710](./System Programming.assets/image-20210511110539710.png)")]),a._v(" "),e("li",[a._v("함수에서 eax와 ebx 참조")]),a._v(" "),e("li",[a._v("eax레지스터에 시스템콜 번호")]),a._v(" "),e("li",[a._v("ebx레지스터에 인자값")]),a._v(" "),e("li",[a._v("시스템콜 실행")]),a._v(" "),e("li",[a._v("![image-20210511110226649](./System Programming.assets/image-20210511110226649.png)")]),a._v(" "),e("li",[a._v("사용자모드로 변경")])])])])]),a._v(" "),e("li",[a._v("c 라이브러리\n"),e("ul",[e("li",[a._v("커널도 c언어로 이뤄져있다.")])])]),a._v(" "),e("li",[a._v("c 컴파일러")])]),a._v(" "),e("h3",{attrs:{id:""}},[e("a",{staticClass:"header-anchor",attrs:{href:"#"}},[a._v("#")])]),a._v(" "),e("h3",{attrs:{id:"api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[a._v("#")]),a._v(" API")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("응용 프로그램과 분리된 하위 호환 인터페이스")]),a._v(" "),e("p",[a._v("![image-20210511155556865](./System Programming.assets/image-20210511155556865.png)")])]),a._v(" "),e("li",[e("p",[a._v("라이브러리")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("동적 라이브러리")]),a._v(" "),e("ul",[e("li",[a._v("바이너리가 이미 만들어져 있어서 사용시 여기에 붙여서 쓴다.")]),a._v(" "),e("li",[a._v("실행할때 호출하며 실행파일로 컴파일할때는 같이 컴파일 되지 않는다.")]),a._v(" "),e("li",[a._v("api는 응용프로그램과 분리되어 있다. 그래서 라이브러리가 따로 업데이트 가능하다. 에러가 날 수도 있겠지만.")])])]),a._v(" "),e("li",[e("p",[a._v("정적 라이브러리")])]),a._v(" "),e("li",[e("p",[a._v("대표적 라이브러리")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("유닉스 C 라이브러리 : libc")]),a._v(" "),e("ul",[e("li",[a._v("cc : c compiler")])])]),a._v(" "),e("li",[e("p",[a._v("리눅스 C 라이브러리 : GNU libc,")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("gcc : gnu c  compiler")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("aws에는 기본설치가 안 되어 있으므로 설치해주자")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("sudo apt-get install gcc\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("gcc -o test.c test")]),a._v(" : 컴파일")])])])])])])])])])])]),a._v(" "),e("h2",{attrs:{id:"abi와-표준"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abi와-표준"}},[a._v("#")]),a._v(" ABI와 표준")]),a._v(" "),e("h3",{attrs:{id:"abi-application-binary-interface"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#abi-application-binary-interface"}},[a._v("#")]),a._v(" ABI(Application Binary Interface)")]),a._v(" "),e("p",[a._v("![image-20210511160321732](./System Programming.assets/image-20210511160321732.png)")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("함수 실행 방식, 레지스터 활용, 시스템 콜 실행, 라이브러리 링크 방식 등")])]),a._v(" "),e("li",[e("p",[a._v("ABI가 호환되면 재컴파일없이 동작")])]),a._v(" "),e("li",[e("p",[a._v("툴체인(컴파일러를 만드는 프로그램)에서 사용된다.")])]),a._v(" "),e("li",[e("p",[a._v("함수의 인자들을 어떤 레지스터에 넣을 것인가? 같은 것을 정해준다.")]),a._v(" "),e("p",[a._v("![image-20210511160537397](System Programming.assets/image-20210511160537397.png)")])])]),a._v(" "),e("h3",{attrs:{id:"posix"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#posix"}},[a._v("#")]),a._v(" POSIX")]),a._v(" "),e("ul",[e("li",[a._v("API와 ABI를 표준화하려는 시도가 있었다. (IEEE)")]),a._v(" "),e("li",[a._v("리차드 스톨만(자유 소프트웨어 재단)이 POSIX를 표준안으로 제안")])]),a._v(" "),e("h3",{attrs:{id:"시스템-프로그래밍과-버전"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#시스템-프로그래밍과-버전"}},[a._v("#")]),a._v(" 시스템 프로그래밍과 버전")]),a._v(" "),e("ul",[e("li",[a._v("소프트웨어는 계속 업데이트 되지만")]),a._v(" "),e("li",[a._v("시스템 레벨단 기술은 70년대부터 꾸준하게 유지가 되고 있다.")]),a._v(" "),e("li",[a._v("하위 시스템 레벨을 알고 있는게 중요하다.")])]),a._v(" "),e("h1",{attrs:{id:"_5-process-management"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-process-management"}},[a._v("#")]),a._v(" 5. Process Management")]),a._v(" "),e("h2",{attrs:{id:"pid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pid"}},[a._v("#")]),a._v(" PID")]),a._v(" "),e("h3",{attrs:{id:"basic"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#basic"}},[a._v("#")]),a._v(" Basic")]),a._v(" "),e("ul",[e("li",[a._v("프로그램 : 바이너리, 코드 이미지, 응용 프로그램, application, 또는 실행 파일")]),a._v(" "),e("li",[a._v("프로세스 : 현재 실행중인 프로그램(메모리 적재 + 프로세스 상태PCB)")]),a._v(" "),e("li",[a._v("스레드\n"),e("ul",[e("li",[a._v("리눅스는 무조건 기본 스레드가 포함된다")]),a._v(" "),e("li",[a._v("싱글스레드 : 리눅스는 기본적으로 싱글스레드")]),a._v(" "),e("li",[a._v("멀티스레드 : 강제로 여러개 띄운경우")])])])]),a._v(" "),e("h3",{attrs:{id:"pid-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pid-2"}},[a._v("#")]),a._v(" PID")]),a._v(" "),e("ul",[e("li",[a._v("유니크한 pid")]),a._v(" "),e("li",[a._v("부호형 16비트 정수값 -> 최대값은 2^15 = 32768")]),a._v(" "),e("li",[a._v("pid 값 한계 때문에 문제가 발생할 수 있다.\n"),e("ul",[e("li",[e("code",[a._v("sudo vi /proc/sys/kernel/pid_max")])])])])]),a._v(" "),e("h3",{attrs:{id:"process-layer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#process-layer"}},[a._v("#")]),a._v(" Process Layer")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("init process's PID = 1")])]),a._v(" "),e("li",[e("p",[a._v("init 프로세스는 운영체제가 만든다.")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("ppid")]),a._v("를 통해 부모 프로세스의 pid를 알 수 있다.")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("ps -ef")]),a._v("를 통해 알 수 있다.")]),a._v(" "),e("li",[a._v("e : 시스템 상 모든 프로세스 출력")]),a._v(" "),e("li",[a._v("f : UID, PID, PPID< CPU, STIME, TTY, TIME, CMD를 출력")])])])]),a._v(" "),e("h3",{attrs:{id:"프로세스와-owner"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#프로세스와-owner"}},[a._v("#")]),a._v(" 프로세스와 owner")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("sudo vi /etc/passwd")]),a._v(" : pw뿐만 아니라 uid와 gid도 있다.")]),a._v(" "),e("p",[a._v("![image-20210511173615864](./System Programming.assets/image-20210511173615864.png)")]),a._v(" "),e("ul",[e("li",[a._v("사용자 : 비밀번호(가려짐):uid:gid")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("sudo vi /etc/shadow")])])])]),a._v(" "),e("h2",{attrs:{id:"pid-system-call"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pid-system-call"}},[a._v("#")]),a._v(" PID & System Call")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("getpid()")]),a._v(" : pid를 가져온다.")]),a._v(" "),e("li",[e("code",[a._v("getppid()")]),a._v(" : ppid를 가져온다.")]),a._v(" "),e("li",[a._v("둘다 시스템콜을 사용한다.")])]),a._v(" "),e("h2",{attrs:{id:"process-생성"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#process-생성"}},[a._v("#")]),a._v(" Process 생성")]),a._v(" "),e("ul",[e("li",[a._v("컴파일시 TEXT, DATA, BSS는 만들어지고 실행시 HEAP, STACK이 만들어진다.")]),a._v(" "),e("li",[a._v("프로세스 생성 시\n"),e("ul",[e("li",[a._v("전체 메모리 만들어진다")]),a._v(" "),e("li",[a._v("TEXT, DATA, BSS 부분(이미지)이 업로드 된다")]),a._v(" "),e("li",[a._v("실행하면서 HEAP, STACK이 바뀌어 간다.")])])]),a._v(" "),e("li",[a._v("프로세스 계층\n"),e("ul",[e("li",[a._v("부모와 자식 프로세스가 있다.")])])])]),a._v(" "),e("h2",{attrs:{id:"fork"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fork"}},[a._v("#")]),a._v(" Fork")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("동일한 코드, 데이터를 가진 프로세스를 만든다")])]),a._v(" "),e("li",[e("p",[a._v("부모 프로세스는 그대로 살아 있다.")])]),a._v(" "),e("li",[e("p",[a._v("자식 생성 시 Program Counter는 같은 위치")])]),a._v(" "),e("li",[e("p",[a._v("리턴 값이 PID이다.")]),a._v(" "),e("ul",[e("li",[a._v("PID가 0이면 child")]),a._v(" "),e("li",[a._v("아니면 부모여서 실행을 다르게 할 수 있다.")])]),a._v(" "),e("p",[a._v("![image-20210511182252832](./System Programming.assets/image-20210511182252832.png)")])])]),a._v(" "),e("p",[a._v("![image-20210511184358959](./System Programming.assets/image-20210511184358959.png)")]),a._v(" "),e("h2",{attrs:{id:"exec"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exec"}},[a._v("#")]),a._v(" Exec")]),a._v(" "),e("ul",[e("li",[a._v("별도의 새로운 프로세스를 만드는 것이 아니라 현재 공간에 덮어 씌운다.")]),a._v(" "),e("li",[a._v("부모 프로세스는 사라진다.")]),a._v(" "),e("li",[a._v("새로운 실행 파일!")])]),a._v(" "),e("p",[a._v("![image-20210509182607408](./System Programming.assets/image-20210509182607408.png)")]),a._v(" "),e("ul",[e("li",[a._v("BSS, DATA, TEXT 전부 덮어씌워진다.")]),a._v(" "),e("li",[a._v("![image-20210509182639121](./System Programming.assets/image-20210509182639121.png)")]),a._v(" "),e("li",[e("code",[a._v("execl(루트부터의디렉토리, argv[0], argv[1]... , NULL)")])])]),a._v(" "),e("p",[a._v("![image-20210511183108589](./System Programming.assets/image-20210511183108589.png)")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("execlp")]),a._v(" : path가 들어가있어서 풀 디렉토리를 안 쳐도 된다.")])]),a._v(" "),e("p",[a._v("![image-20210511183152951](./System Programming.assets/image-20210511183152951.png)")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("execle")]),a._v(" : 환경변수를 사용자가 직접 세팅해서 쓴다. "),e("code",[a._v("execlp")]),a._v("는 기존설정된 path를 사용.")])]),a._v(" "),e("p",[a._v("![image-20210511183308360](./System Programming.assets/image-20210511183308360.png)")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("v")]),a._v(" 가 붙으면 인자를 variable로 넣는다.")])]),a._v(" "),e("h2",{attrs:{id:"wait"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#wait"}},[a._v("#")]),a._v(" wait")]),a._v(" "),e("ul",[e("li",[a._v("fork() 함수 호출시 자식프로세스가 종료할때까지 부모 프로세스가 기다림.")]),a._v(" "),e("li",[a._v("부모 프로세스가 먼저 죽으며 좀비, 고아 프로세스가 생길 수 있다.")]),a._v(" "),e("li",[a._v("shell프로그램들은 전형적으로 이러하다.")]),a._v(" "),e("li",[a._v("fork()로 새로운 프로세스 복사후 execl()쓰는 것이 일반적이다.")]),a._v(" "),e("li",[a._v("shell자체가 기본적으로 fork를 따고 그 안에서 execl을 돌리는 형태다. wait()가 걸려있어서 꺼지지 않는다.")])]),a._v(" "),e("h2",{attrs:{id:"copy-on-wirte"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#copy-on-wirte"}},[a._v("#")]),a._v(" copy on wirte")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("리눅스는 프로세스당 4gb의 가상메모리가 할당된다")]),a._v(" "),e("p",[a._v("![image-20210509201148106](./System Programming.assets/image-20210509201148106.png)")])]),a._v(" "),e("li",[e("p",[a._v("3~4gb : 커널 스페이스에 운영체제가 들어간다.")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("프로세스당 들어갈 필요가 없기 때문에 물리메모리는 동일 영역을 사용한다.")]),a._v(" "),e("p",[a._v("![image-20210509201320467](./System Programming.assets/image-20210509201320467.png)")])]),a._v(" "),e("li")])]),a._v(" "),e("li",[e("p",[a._v("0~3gb : 유저")])]),a._v(" "),e("li",[e("p",[a._v("fork()는 새로운 프로레스 공간 생성 후 기본 프로세스 공간 복사")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("4gb를 복사하면 프로세스 생성시간이 오래 걸린다.")])]),a._v(" "),e("li",[e("p",[a._v("자식 프로세스 생성시, 부모 프로세스의 페이지를 그대로 사용한다.")])]),a._v(" "),e("li",[e("p",[a._v("읽기가 아닌 쓰기를 할때 이때 페이지를 복사하고 분리한다.")])]),a._v(" "),e("li",[e("p",[a._v("이렇게 프로세스 생성 시간을 줄일 수 있고 페이지 수도 최소화 할 수 있다.")]),a._v(" "),e("p",[a._v("![image-20210509201841606](./System Programming.assets/image-20210509201841606.png)")])]),a._v(" "),e("li")])])]),a._v(" "),e("h2",{attrs:{id:"exit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exit"}},[a._v("#")]),a._v(" exit")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("exit()")]),a._v(" 시스템콜 : 프로세스 종류")]),a._v(" "),e("li",[a._v("기본 구조 : 부모에서 fork치고 부모는 wait. 자식은 exec하고 부모로 돌아옴. 그 뒤에 뒷처리 함")]),a._v(" "),e("li",[a._v("그렇기 때문에 프로세스 종료상태를 알려주는 exit이 필요하다.")]),a._v(" "),e("li",[a._v("보통 비정상 종료를 할때 "),e("code",[a._v("exit")]),a._v("을 사용한다.")]),a._v(" "),e("li",[a._v("c언어 실행시\n"),e("ul",[e("li",[a._v("사실 "),e("code",[a._v("int main(){}")]),a._v("함수도 "),e("code",[a._v("start")]),a._v("라는 함수 안에 있다. "),e("code",[a._v("start")]),a._v("는 라이브러로 compile될때 바이너리가 붙여져 있다.")]),a._v(" "),e("li",[a._v("start함수 내부에서 main이 진행되고 return 값이 나오면 main함수는 종료.")]),a._v(" "),e("li",[a._v("start함수의 남은 부분에서 뒷처리가 실행되고 마지막에 있는 exit이 실행되면서 종료된다")]),a._v(" "),e("li",[a._v("main함수 안에 exit을 쓰면 거기서 바로 start함수까지 끝나게 된다.")])])]),a._v(" "),e("li",[e("code",[a._v("return")]),a._v(" vs "),e("code",[a._v("exit")]),a._v(" "),e("ul",[e("li",[a._v("exit : 즉시 종료")]),a._v(" "),e("li",[a._v("return : main이라는 함수만 종료")])])]),a._v(" "),e("li",[e("code",[a._v("exit(EXIT_SUCCESS)")]),a._v(" or "),e("code",[a._v("exit(0)")])]),a._v(" "),e("li",[e("code",[a._v("exit(EXIT_FAILURE)")]),a._v(" or "),e("code",[a._v("exit(1)")])]),a._v(" "),e("li",[a._v("exit() 시스템콜 내부 동작\n"),e("ul",[e("li",[a._v("atexit() : 종료시 실행될 함수 등록가능")]),a._v(" "),e("li",[a._v("IO 스트림 버퍼 삭제(stdin, stdout, stderr)")]),a._v(" "),e("li",[a._v("프로세스가 오픈한 파일 모두 종료")]),a._v(" "),e("li",[a._v("tmpfile()을 통해 생성한 임시 파일 삭제")])])])]),a._v(" "),e("h1",{attrs:{id:"_6-ipc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-ipc"}},[a._v("#")]),a._v(" 6. IPC")]),a._v(" "),e("p",[a._v("![image-20210509190933458](./System Programming.assets/image-20210509190933458.png)")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("기본적으로 process간에 정보를 주고 받을 수 없어서 나온게 IPC")])]),a._v(" "),e("li",[e("p",[a._v("File을 만들어서 공유하던가")])]),a._v(" "),e("li",[e("p",[a._v("커널 공간을 공유함으로 주고 받을 수 있다.")])]),a._v(" "),e("li",[e("p",[a._v("기법들")]),a._v(" "),e("ul",[e("li",[a._v("file")]),a._v(" "),e("li",[a._v("message queue")]),a._v(" "),e("li",[a._v("shared memory")]),a._v(" "),e("li",[a._v("pipe")]),a._v(" "),e("li",[a._v("signal")]),a._v(" "),e("li",[a._v("semaphore")]),a._v(" "),e("li",[a._v("socket")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("ipcs")]),a._v("를 통해 kernel 공간 메모리 확인 가능")]),a._v(" "),e("p",[a._v("![image-20210509192747132](./System Programming.assets/image-20210509192747132.png)")])])]),a._v(" "),e("p",[a._v("![image-20210509192617961](./System Programming.assets/image-20210509192617961.png)")]),a._v(" "),e("h3",{attrs:{id:"pipe-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pipe-2"}},[a._v("#")]),a._v(" pipe")]),a._v(" "),e("ul",[e("li",[a._v("부모 -> 자식. 단방향 통신")])]),a._v(" "),e("p",[a._v("![image-20210509191159802](./System Programming.assets/image-20210509191159802.png)")]),a._v(" "),e("ul",[e("li",[a._v("pipe는 커널에 생성된다.")])]),a._v(" "),e("h3",{attrs:{id:"message-queue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#message-queue"}},[a._v("#")]),a._v(" message queue")]),a._v(" "),e("ul",[e("li",[a._v("물리의 커널 영역에 message queue를 만들어서 주고 받는다.")]),a._v(" "),e("li",[a._v("양방향 통신이 가능하다.")])]),a._v(" "),e("h3",{attrs:{id:"shared-memory"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shared-memory"}},[a._v("#")]),a._v(" shared memory")]),a._v(" "),e("ul",[e("li",[a._v("message queue는 fifo방식인데 이건 그냥 변수처럼 접근 가능하게 한다.")]),a._v(" "),e("li",[a._v("공유메모리 key를 갖고 여러 프로세스가 접근 가능하다.")]),a._v(" "),e("li",[e("code",[a._v("shmget")]),a._v(" : 공유메모리를 생성하는 system call")]),a._v(" "),e("li",[e("code",[a._v("shmat")]),a._v(" : 메모리에 매핑")]),a._v(" "),e("li",[e("code",[a._v("shmdt")]),a._v(" : 메모리 해제")]),a._v(" "),e("li",[e("code",[a._v("shmctl")]),a._v(" : 공유 메모리 삭제")])]),a._v(" "),e("h1",{attrs:{id:"_7-signal"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-signal"}},[a._v("#")]),a._v(" 7. Signal")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("ipc기법처럼 쓰일 수 있지만 그것만으로 한정 할 순 없다.")])]),a._v(" "),e("li",[e("p",[a._v("유닉스에서 30년간 이용")])]),a._v(" "),e("li",[e("p",[a._v("커널 또는 프로세스에서 다른 프로세스에 어떤 이벤트가 발생되었는지를 알려주는 기법")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("ctrl c")]),a._v("도 시그널의 한 예다.")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("ctrl z")]),a._v(" 프로세스를 백그라운드로 바꾼다. 이것도 시그널이다.")]),a._v(" "),e("p",[a._v("![image-20210509195647486](./System Programming.assets/image-20210509195647486.png)")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("kill -l")]),a._v(" : 시그널을 다 볼 수 있다.")])])]),a._v(" "),e("h3",{attrs:{id:"시그널과-프로세스"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#시그널과-프로세스"}},[a._v("#")]),a._v(" 시그널과 프로세스")]),a._v(" "),e("p",[a._v("![image-20210509200459210](./System Programming.assets/image-20210509200459210.png)")]),a._v(" "),e("ul",[e("li",[a._v("시그널을 순서대로 받아서 대기 시킨다.")]),a._v(" "),e("li",[a._v("blocked 64bit. 시그널이 64개여서 각각 막는지 안막는지 설정")]),a._v(" "),e("li",[a._v("sig : 어떤 동작을 처리할지 action에 정의돼있다.")]),a._v(" "),e("li",[a._v("순서 :\n"),e("ul",[e("li",[a._v("프로세스에 signal 발생 시 : signal 관련 자료구조에 signal이 들어가고")]),a._v(" "),e("li",[a._v("프로세스는 각종 시스템콜과 인터럽트에 의해 커널모드로 수시로 바뀐다.")]),a._v(" "),e("li",[e("strong",[a._v("사용자모드로 전환하는 시점")]),a._v("에 마지막에 하는 일 중 하나가 시그널을 확인하고 실행해야되면 실행한다.")])])])]),a._v(" "),e("h1",{attrs:{id:"_8-shell-script"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-shell-script"}},[a._v("#")]),a._v(" 8. Shell Script")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("쉘을 사용해서 프로그래밍")])]),a._v(" "),e("li",[e("p",[a._v("서버작업 및 devops를 위해 필요하다")])]),a._v(" "),e("li",[e("p",[a._v("쉘 명령어에 문법이 추가된 형태")])]),a._v(" "),e("li",[e("p",[a._v("example")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("situation")]),a._v(" "),e("blockquote",[e("p",[a._v("서버가 다운됨.")]),a._v(" "),e("p",[a._v("저장공간이 없음.")]),a._v(" "),e("p",[a._v("로그 파일 업데이트가 안되어 프로그램 비정상종료")]),a._v(" "),e("p",[a._v("로그파일 누적이 원인")]),a._v(" "),e("p",[a._v("로그파일 자동 삭제 방법은?")])])]),a._v(" "),e("li",[e("p",[a._v("해결")]),a._v(" "),e("blockquote",[e("p",[a._v("쉘스크립트 생성 및 주기적 실행(cron tab)")])])])])]),a._v(" "),e("li",[e("p",[a._v("기본문법")]),a._v(" "),e("ul",[e("li",[a._v("파일로 작성 후 파일을 실행")]),a._v(" "),e("li",[a._v("가장 첫 라인은 "),e("code",[a._v("#!/bin/bash")])]),a._v(" "),e("li",[a._v("실행 권한이 필요하다.")]),a._v(" "),e("li",[e("code",[a._v("name.sh")]),a._v(" 형식이다.")]),a._v(" "),e("li",[e("code",[a._v("#")]),a._v(" 은 주석 라인")]),a._v(" "),e("li",[a._v("변수\n"),e("ul",[e("li",[a._v("변수명=데이터")]),a._v(" "),e("li",[a._v("![image-20210512094504581](./System Programming.assets/image-20210512094504581.png)")])])])])])]),a._v(" "),e("h3",{attrs:{id:"리스트-변수"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#리스트-변수"}},[a._v("#")]),a._v(" 리스트 변수")]),a._v(" "),e("p",[a._v("![image-20210512095117630](./System Programming.assets/image-20210512095117630.png)")]),a._v(" "),e("p",[a._v("리스트 변수를 쓸때는 중괄호를 써줘야 한다.")]),a._v(" "),e("p",[a._v("중괄호를 안쓰면 daemons를 변수로 하고(리스트의첫번째만 인식) [1]을 스트링으로 인식한다. 결과 : "),e("code",[a._v("httpd[1]")])]),a._v(" "),e("h3",{attrs:{id:"사전-정의된-지역-변수"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#사전-정의된-지역-변수"}},[a._v("#")]),a._v(" 사전 정의된 지역 변수")]),a._v(" "),e("p",[a._v("![image-20210512095523535](./System Programming.assets/image-20210512095523535.png)")]),a._v(" "),e("h3",{attrs:{id:"연산자"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#연산자"}},[a._v("#")]),a._v(" 연산자")]),a._v(" "),e("p",[a._v("![image-20210512095839696](./System Programming.assets/image-20210512095839696.png)")]),a._v(" "),e("ul",[e("li",[a._v("백틱 꼭 쓰고")]),a._v(" "),e("li",[a._v("expr로 연산한다")]),a._v(" "),e("li",[a._v("숫자와 기호는 다 한칸씩 띄운다.")]),a._v(" "),e("li",[a._v("괄호와 곱하기 앞에는 역슬래시를 써야한다.")])]),a._v(" "),e("h3",{attrs:{id:"조건문"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#조건문"}},[a._v("#")]),a._v(" 조건문")]),a._v(" "),e("p",[a._v("![image-20210512171513385](./System Programming.assets/image-20210512171513385.png)")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("if [ 조건 ]\nthen\n\t명령문\nfi\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("![image-20210512170907867](./System Programming.assets/image-20210512170907867.png)")]),a._v(" "),e("p",[a._v("![image-20210512170933316](./System Programming.assets/image-20210512170933316.png)")]),a._v(" "),e("p",[a._v("![image-20210512171054044](./System Programming.assets/image-20210512171054044.png)")]),a._v(" "),e("p",[a._v("![image-20210512171450358](./System Programming.assets/image-20210512171450358.png)")]),a._v(" "),e("h3",{attrs:{id:"ping"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ping"}},[a._v("#")]),a._v(" ping")]),a._v(" "),e("ul",[e("li",[a._v("IP주소가 서버를 가르킨다.")]),a._v(" "),e("li",[a._v("핑은 연결돼있는 컴퓨터가 살아있는지 확인한다.")]),a._v(" "),e("li",[a._v("확인 요청을 보내면 살아있으면 응답이 온다.")]),a._v(" "),e("li",[e("code",[a._v("ping -c 1 192.168.0.1 1> /dev/null")]),a._v(" "),e("ul",[e("li",[a._v("-c : 한번만 확인해라. 안하면 초당 몇회씩 확인함")]),a._v(" "),e("li",[a._v("0 표준입력, 1 표준출력, 2표준에러")]),a._v(" "),e("li",[e("code",[a._v("$?")]),a._v(" : 마지막 결과값")])])])]),a._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/bash")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ping")]),a._v(" -c "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.169")]),a._v(".0.1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("1")]),a._v(">")]),a._v(" /dev/null\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'핑성공!'")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'핑실패!'")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br")])]),e("h3",{attrs:{id:"for"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#for"}},[a._v("#")]),a._v(" for")]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/bash")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[a._v("database")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$database")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])]),e("h3",{attrs:{id:"while"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#while"}},[a._v("#")]),a._v(" while")]),a._v(" "),e("p",[a._v("![image-20210512172518830](./System Programming.assets/image-20210512172518830.png)")]),a._v(" "),e("h3",{attrs:{id:"예제-백업하기"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#예제-백업하기"}},[a._v("#")]),a._v(" 예제 - 백업하기")]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/bash")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" -z "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" -z "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" usage: "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$0")]),a._v(" sourcedir targetdir\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("SRCDIR")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DSTDIR")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("BACKUPFILE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("backup."),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +%y%m%d%H%M%S"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(".tar.gz\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" -d "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#DSTDIR ]; then")]),a._v("\n                "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -cvzf "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DSTDIR")]),a._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$BACKUPFILE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$SRCDIR")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v("\n                "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DSTDIR")]),a._v("\n                "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -cvzf "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DSTDIR")]),a._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$BACKUPFILE")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$SRCDIR")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br")])]),e("ul",[e("li",[a._v("인자로 $1 과 $2 두개를 받는다. 제대로 안오면 사용법만 인쇄")]),a._v(" "),e("li",[e("code",[a._v("date")]),a._v("라는 함수로 시간 가져온다 : backup.현재시각.tar.gz")]),a._v(" "),e("li",[e("code",[a._v("-d")]),a._v(" 로 디렉토리가 현재 있는지 없는지 판단한다")]),a._v(" "),e("li",[e("code",[a._v("tar")]),a._v(" : 70년대부터 있던 압축명령. 원래는 묶기만 했는데 이제 압축도 한다.\n"),e("ul",[e("li",[a._v("x : 묶음 해제")]),a._v(" "),e("li",[a._v("c : 파일 묶음")]),a._v(" "),e("li",[a._v("v : 과정을 화면에 표시")]),a._v(" "),e("li",[a._v("z : gunzip 사용")]),a._v(" "),e("li",[a._v("f : 파일 이름 지정")]),a._v(" "),e("li",[a._v("주요 옵션\n"),e("ul",[e("li",[e("code",[a._v("tar -cvzf [압축된 파일 이름] [압축할 파일이나 폴더]")])]),a._v(" "),e("li",[e("code",[a._v("tar -xvzf [압축해제할 이름]")])])])]),a._v(" "),e("li")])])]),a._v(" "),e("h3",{attrs:{id:"예제-로그파일-정리하기"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#예제-로그파일-정리하기"}},[a._v("#")]),a._v(" 예제 - 로그파일 정리하기")]),a._v(" "),e("ul",[e("li",[a._v("정책\n"),e("ul",[e("li",[a._v("로그파일 2일 이상 -> 압축")]),a._v(" "),e("li",[a._v("압축파일 3일 이상 -> 삭제")])])])]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/bash")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LOGDIR")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/log\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GZIPDAY")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DELDAY")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$LOGDIR")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"cd '),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$LOGDIR")]),a._v('"')]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" -type f -name "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'*.log.?'")]),a._v(" -mtime +"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$GZIPDAY")]),a._v(" -exec "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" -c "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"gzip {}"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" -type f -name "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("'*.gz'")]),a._v(" -mtime +"),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$DELDAY")]),a._v(" -exec "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" -c "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"rm -f {}"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),a._v("\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br")])]),e("ul",[e("li",[e("code",[a._v("find")]),a._v(" : 찾기.")]),a._v(" "),e("li",[e("code",[a._v(".")]),a._v(" : 현재폴더")]),a._v(" "),e("li",[e("code",[a._v("-type f")]),a._v(" : 디렉토리가 아닌 파일들만")]),a._v(" "),e("li",[e("code",[a._v("*")]),a._v(" : 아무 str")]),a._v(" "),e("li",[e("code",[a._v("?")]),a._v(" : 한글자 (참고:정규표현식)")]),a._v(" "),e("li",[e("code",[a._v("-mtime +$GZIPDAY")]),a._v(" : 2일 이상된 파일 검색")]),a._v(" "),e("li",[e("code",[a._v('-exec bash -c "명령어1; 명령어2";')]),a._v(": 파일들에 해당 명령어 실행")])]),a._v(" "),e("h1",{attrs:{id:"_9-thread"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-thread"}},[a._v("#")]),a._v(" 9. Thread")]),a._v(" "),e("h3",{attrs:{id:"thread란"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#thread란"}},[a._v("#")]),a._v(" Thread란?")]),a._v(" "),e("ul",[e("li",[a._v("프로세스 내에서 실제로 작업을 수행하는 주체")]),a._v(" "),e("li",[a._v("프로세스 안에는 한개 이상의 스레드가 작업을 수행")]),a._v(" "),e("li",[a._v("스택과 PC register는 독립적으로 할당된다.")]),a._v(" "),e("li",[a._v("커널의 도움 없이 상호 통신 가능. -> 동기화 문제를 해결해야한다.")])]),a._v(" "),e("p",[a._v("![image-20210512185718031](./System Programming.assets/image-20210512185718031.png)")]),a._v(" "),e("h3",{attrs:{id:"pthread란"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pthread란"}},[a._v("#")]),a._v(" Pthread란?")]),a._v(" "),e("ul",[e("li",[a._v("POSIX Thread")]),a._v(" "),e("li",[a._v("저수준 API 100개 함수 제공")]),a._v(" "),e("li",[a._v("핵심 라이브러리")]),a._v(" "),e("li",[a._v("다른 스레드도 Pthread기반으로 구현")])]),a._v(" "),e("h3",{attrs:{id:"pthread-라이브러리"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pthread-라이브러리"}},[a._v("#")]),a._v(" Pthread 라이브러리")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("<phtread.h>")]),a._v(" 헤더파일")])]),a._v(" "),e("li",[e("p",[a._v("함수는 "),e("code",[a._v("pthread_")]),a._v("로 시작")])]),a._v(" "),e("li",[e("p",[a._v("그룹")]),a._v(" "),e("ul",[e("li",[a._v("스레드 관리 : 생성, 종료, 조인, 디태치")]),a._v(" "),e("li",[a._v("동기화 : 뮤텍스 등 동기화 관련 함수")])])]),a._v(" "),e("li",[e("p",[a._v("glibc와 분리된 libpthread 라이브러리에 구현되어서 컴파일시 명시해줘야한다.")]),a._v(" "),e("p",[e("code",[a._v("gcc -pthread test.c -o test")])])])]),a._v(" "),e("h3",{attrs:{id:"thread-생성"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#thread-생성"}},[a._v("#")]),a._v(" thread 생성")]),a._v(" "),e("h3",{attrs:{id:"thread-종료"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#thread-종료"}},[a._v("#")]),a._v(" thread  종료")]),a._v(" "),e("blockquote",[e("p",[a._v("보통 잘 안쓴다. 알아서 종료되기 때문.")])]),a._v(" "),e("h3",{attrs:{id:"thread-조인"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#thread-조인"}},[a._v("#")]),a._v(" thread 조인")]),a._v(" "),e("blockquote",[e("p",[a._v("특정 thread가 끝날때까지 기다려주는 함수")])]),a._v(" "),e("h3",{attrs:{id:"thread-디태치"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#thread-디태치"}},[a._v("#")]),a._v(" thread 디태치")]),a._v(" "),e("blockquote",[e("p",[a._v("스레드 종료시 즉시 관련 리스소 해제. 조인을 기다리지 않고 종료 즉시 해제.")])]),a._v(" "),e("ul",[e("li",[a._v("종료 후 상태값으로 후처리를 안하면 디태치, 사용하면 조인.")]),a._v(" "),e("li",[a._v("detach를 했다고 다음 코드들이 join처럼 기다리지 않고 그대로 실행된다.")])]),a._v(" "),e("p",[a._v("![image-20210513015121091](./System Programming.assets/image-20210513015121091.png)")]),a._v(" "),e("h3",{attrs:{id:"mutex"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mutex"}},[a._v("#")]),a._v(" mutex")]),a._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("phthread_mutex_t mutex_lock "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" PTHREAD_MUTEX_INITIALIZER"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("자원을 독점할수 있게 해준다.")]),a._v(" "),e("h1",{attrs:{id:"_10-system-programming-advanced"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-system-programming-advanced"}},[a._v("#")]),a._v(" 10. System Programming Advanced")]),a._v(" "),e("h2",{attrs:{id:"메모리와-mmap"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#메모리와-mmap"}},[a._v("#")]),a._v(" 메모리와 mmap")]),a._v(" "),e("ul",[e("li",[e("p",[e("code",[a._v("malloc")]),a._v(" : heap 영역에 동적 메모리를 생성한다.")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("free")]),a._v(" : heap영역의 메모리 해제 가능")])]),a._v(" "),e("li",[e("p",[e("code",[a._v("mmap")]),a._v(" : 파일, 메모리, 프로세스가 있다고 생각하자. 프로세스에서 파일을 접근하는건 시간이 굉장히 많이 걸린다. mmap은 파일을 메모리에 매핑하여 미리 올려놓을수 있다. 이러면 시스템콜, 스케쥴러, 인터럽트, dma, 시스템버스 모두 필요 없어서 굉장히 빨라진다.")])]),a._v(" "),e("li",[e("p",[a._v("![image-20210509203304038](./System Programming.assets/image-20210509203304038.png)")])]),a._v(" "),e("li",[e("p",[a._v("파일 액세스를 줄여서 성능을 높인다. 가상 메모리와 흡사한 메커니즘이다.")])]),a._v(" "),e("li",[e("p",[a._v("장점")]),a._v(" "),e("ul",[e("li",[a._v("read, write의 반복적 파일 접근 방지")]),a._v(" "),e("li",[a._v("파일 처리를 위핸 lseek(느림)를쓰지 않고 포인터 조작으로 탐색 가능")])])]),a._v(" "),e("li",[e("p",[a._v("단점")]),a._v(" "),e("ul",[e("li",[a._v("페이지 사이즈 단위로 매핑된다(4kb)\n"),e("ul",[e("li",[a._v("페이지 사이즈 단위가 정수배가 아니면 한 페이지 정도 낭비한다.")])])])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("int msync(void *start, size_t length, int flags)")])]),a._v(" "),e("ul",[e("li",[a._v("start : mmap() 을 통해 받은 메모리 맵의 주소")]),a._v(" "),e("li",[a._v("length : 동기화 할 길이")]),a._v(" "),e("li",[a._v("flags : 비동기, 동기 방식을 정한다. 동기시 블럭 상태로 대기 한다.")])])]),a._v(" "),e("li",[e("p",[e("code",[a._v("int munmap(void *addr)")])])])]),a._v(" "),e("h3",{attrs:{id:"stat"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stat"}},[a._v("#")]),a._v(" stat")]),a._v(" "),e("blockquote",[e("p",[a._v("inode 정보를 받아온다.")])]),a._v(" "),e("div",{staticClass:"language-c line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[e("span",{pre:!0,attrs:{class:"token macro property"}},[e("span",{pre:!0,attrs:{class:"token directive-hash"}},[a._v("#")]),e("span",{pre:!0,attrs:{class:"token directive keyword"}},[a._v("include")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("<sys/types.h>")])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token macro property"}},[e("span",{pre:!0,attrs:{class:"token directive-hash"}},[a._v("#")]),e("span",{pre:!0,attrs:{class:"token directive keyword"}},[a._v("include")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("<sys/stat.h>")])]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token macro property"}},[e("span",{pre:!0,attrs:{class:"token directive-hash"}},[a._v("#")]),e("span",{pre:!0,attrs:{class:"token directive keyword"}},[a._v("include")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v("<unistd.h>")])]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("stat")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("char")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("struct")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("stat")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("buf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("fstat")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" filedes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("struct")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("stat")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("buf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br")])]),e("ul",[e("li",[a._v("stat : 스테이트")]),a._v(" "),e("li",[a._v("const : 패스정보")]),a._v(" "),e("li",[a._v("struct : 스테이트라는 구조체. inode자료구조를 가져온다.")]),a._v(" "),e("li",[a._v("int : file 디스크립터를 넣는다.")])]),a._v(" "),e("p",[a._v("![image-20210513023758209](./System Programming.assets/image-20210513023758209.png)")])])}),[],!1,null,null,null);s.default=v.exports}}]);